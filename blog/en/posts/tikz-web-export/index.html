<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.110.0">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>TikZ Web Export (pdf to png or svg) &middot; Enrique Acosta Jaramillo</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://enriqueacosta.github.io/blog/en/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://enriqueacosta.github.io/blog/en/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://enriqueacosta.github.io/blog/en/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://enriqueacosta.github.io/blog/en/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  




   
   <base href="https://enriqueacosta.github.io/blog/en/">


   

   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

   
   <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>

   
   <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"
   crossorigin="anonymous"
   onload='renderMathInElement(document.body);'></script>

   <script>
       document.addEventListener("DOMContentLoaded", function() {
           renderMathInElement(document.body, {
               delimiters: [
                   {left: "$$", right: "$$", display: true},
                   {left: "\\[", right: "\\]", display: true},
                   {left: "$", right: "$", display: false},
                   {left: "\\(", right: "\\)", display: false}
               ]
           });
       });
   </script>


</head>

  <body class="theme-base-08 ">
  <aside class="sidebar">
  
    <nav class="LangNav">
    
      <a href="https://enriqueacosta.github.io/blog/en/posts/tikz-web-export/">English</a>
    
      <a href="https://enriqueacosta.github.io/blog/es/posts/tikz-web-export/">Español</a>
    
    </nav>
  
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://enriqueacosta.github.io/blog/en/"><h1>Enrique Acosta Jaramillo</h1></a>
      <p class="lead">
       Personal Blog 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="/blog/en">Home</a> </li>
        <li><a href="/blog/en/subscribe/subscribe"> Subscribe </a></li><li><a href="/blog/en/about/about"> About </a></li><li><a href="/blog/en/categories/"> Categories </a></li><li><a href="/blog/en/tags/"> Tags </a></li>
      </ul>
    </nav>
    <p>2023
      
      
      
    </p>
    <div class="hugo-ref">
      <p>Powered by <a href="https://gohugo.io">Hugo</a>. Layout based on the <a href="https://github.com/spf13/hyde">Hyde</a> theme.</p>
    </div>
    
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>TikZ Web Export (pdf to png or svg)</h1>
  
  
  <time datetime=2022-07-28T19:56:53-0500 class="post-date">July 28, 2022</time>
  
  
  <p> 
    <strong>Tags: </strong>
     
    <a href="https://enriqueacosta.github.io/blog/en/tags/tikz">Tikz</a>
     , 
    <a href="https://enriqueacosta.github.io/blog/en/tags/latex">LaTeX</a>
     , 
    <a href="https://enriqueacosta.github.io/blog/en/tags/converting-png-to-pdf">converting png to pdf</a>
    
  </p>
  
  
  
    
      <h4>(<a href="https://enriqueacosta.github.io/blog/es/posts/tikz-web-export/">Español: Exportar figuras de TikZ para la web (de pdf a png o svg)</a>)</h4>
    
  
  <div>
  <p>TikZ is, in very concise terms, a programing language to generate images based on 
<a href="https://en.wikipedia.org/wiki/LaTeX" target="_blank" rel="noopener">LaTeX</a>. One runs PdfLateX on a TikZ source file (a 
<a href="https://en.wikipedia.org/wiki/Plain_text" target="_blank" rel="noopener">plain text</a> file) and gets as output a beautiful looking pdf. <!-- raw HTML omitted --></p>
<p>For a detailed example, you can see this 
<a href="https://enriqueacosta.github.io/blog/en/posts/tikz-twisted-cubic/">post</a> in which I show the TikZ code of the following image, or this other 
<a href="https://enriqueacosta.github.io/blog/en/posts/tikz-family-of-functions/">post</a> in which I go into even more details of the TikZ syntax to create the plot of a function with mathematics LaTeX labels.</p>
<figure><img src="fig-twistedCubic2.png"
         alt="TikZ figure generated from this .tex file. This is the original pdf output."/><figcaption>
            <p>TikZ figure generated from this 
<a href="fig-twistedCubic2.tex">.tex file</a>. This is the original 
<a href="fig-twistedCubic2.pdf">pdf output</a>.</p>
        </figcaption>
</figure>

<p>TikZ plays an important role in this blog because I enjoy both explaining things graphically and the actual process of creating the TikZ code for images. Once I dedicate the time to generate a good TikZ figure with well thought out code, I can often reuse the code with minor tweaks to very easily generate many more images to further illustrate the ideas I am trying to convey.
TikZ becomes a very efficient high quality tool when this happens.
This is part of the benefit of &ldquo;coding&rdquo; an image instead of creating it with graphical software.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>One of the key things I had to figure out to be able to use TikZ for this blog was a way to change the vector graphic 
<a href="https://en.wikipedia.org/wiki/PDF" target="_blank" rel="noopener">pdf</a> files it generates into more web-friendly formats, since webpages do not support pdf images. There are two possible paths one can take:</p>
<ul>
<li>Create a bitmap (
<a href="https://en.wikipedia.org/wiki/Raster_graphics" target="_blank" rel="noopener">raster</a>) high quality version. A good format widely supported format for this right now is 
<a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics" target="_blank" rel="noopener">png</a>.</li>
<li>Transform into a web-friendly 
<a href="https://en.wikipedia.org/wiki/Vector_graphics" target="_blank" rel="noopener">vector graphic</a> format. The current way to go for the web is 
<a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics" target="_blank" rel="noopener">svg</a>.</li>
</ul>
<p>The key things one wants from these conversions are:</p>
<ol>
<li>Maintain high quality (no noticeable pixelation).</li>
<li>Maintain small file sizes to not have long-loading sluggish blog posts.</li>
</ol>
<p>The raster pngs are often more useful than the vector graphics svg because, unlike svgs, one can use them in different contexts easily like:</p>
<ul>
<li>including in emails.</li>
<li>importing into LibreOffice, google documents, word files.</li>
<li>sharing in Slack.</li>
</ul>
<p>The downside of raster images is that (1) and (2) above are conflicting conditions, and one needs to find the right compromises to get a bit of both.</p>
<p>I found several websites claiming that (1) and (2) cannot be accomplished together in a conversion from pdf to png, and after several failed experiments I was starting to believe them. But I finally came up with a workflow that lets me have my cake and eat it too.</p>
<p>In this blog post I explain how I do these conversions.</p>
<h2 id="first-a-note-about-about-raster-vs-vector-graphics-formats">First, a note about about raster vs vector graphics formats</h2>
<p>The difference between raster and vector images is summed up in the following figure.</p>
<figure><img src="Bitmap_VS_SVG.svg"
         alt="Demonstration of differences between bitmap and SVG images. Image by Yug, modifications by Cfaerber et al. from Wikipedia. CC-BY 2.5 license."/><figcaption>
            <p>Demonstration of differences between bitmap and SVG images. Image by Yug, modifications by Cfaerber et al. from 
<a href="https://commons.wikimedia.org/wiki/File:Bitmap_VS_SVG.svg" target="_blank" rel="noopener">Wikipedia</a>. CC-BY 2.5 license.</p>
        </figcaption>
</figure>

<p>Bitmap (raster) images are images built out of pixels, each one of a specific color. The more pixels the image has, the higher quality it has, but the larger the file size.</p>
<p>For example, my MacBook saves screenshots using the bitmap (raster) format png: this file specifies the color of every single pixel the screen was showing. Since my MacBook has a high resolution screen, these screenshots are usually unnecessarily big (in filesize).</p>
<p>Vector images are different in that they have &ldquo;pen stroke instructions&rdquo; in some internal code. This has two main advantages when the images are schematic-diagram-like (not photography-like):</p>
<ul>
<li>filesizes can be very small (since describing the &ldquo;pen strokes&rdquo; to generate a diagram is usually much more efficient than saying whether a pixel should be colored or not.</li>
<li>infinitely scalable with no quality reduction: images can be zoomed in forever without pixels ever appearing (no pixelation occurs).</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="an-example-showing-the-benefits-of-tikz-vector-graphic-pdf-output">An example showing the benefits of TikZ vector graphic pdf output</h3>
<p>This a figure I made with TikZ is from this 
<a href="https://enriqueacosta.github.io/blog/en/posts/mauna-loa-superexponential/">post</a>
<figure><img src="MaunaLoaThreeModelsTikz150.png"/>
</figure>
</p>
<p>If I open the pdf, I can keep zooming in, and it always looks super sharp! Here is the portion on the top left
<figure><img src="MaunaLoaThreeModelsTikz150-zoom.png"/>
</figure>

and even closer! Super sharp.
<figure><img src="MaunaLoaThreeModelsTikz150-zoom-zoom.png"/>
</figure>
</p>
<p>Compare this to what you see when you zoom into the same image when it is in png format:</p>
<figure><img src="MaunaLoaThreeModelsTikz150-zoom-zoom-png.png"/>
</figure>

<h2 id="how-i-do-the-conversions-from-pdf-tikz-output-to-png">How I do the conversions: from pdf TikZ output to png</h2>
<p>Here is the conversion to png method I have settled upon. It uses the MacOS terminal and ImageMagick.</p>
<h3 id="prerequisites-install-imagemagick">Prerequisites: Install ImageMagick</h3>
<ul>
<li>Install the fantastic Homebrew if you don&rsquo;t have it already (from the terminal.app). Instructions at their 
<a href="https://brew.sh" target="_blank" rel="noopener">website</a>.</li>
<li>Install the also fantastic 
<a href="https://imagemagick.org/" target="_blank" rel="noopener">ImageMagick</a> from the terminal using Homebrew by executing the command:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install imagemagick
</span></span></code></pre></div></li>
</ul>
<p>If steps above work well, then typing the following command in the terminal should provide relevant information (mentioning ImageMagick and its version) instead of an error message:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert --version
</span></span></code></pre></div><h3 id="conversion-from-pdf-to-png-using-imagemagick">Conversion from pdf to png using Imagemagick</h3>
<ul>
<li>Navigate inside the terminal to the folder that contains the pdf file (say <code>filename.pdf</code>) that was created by TikZ.</li>
<li>Execute the following command in the terminal:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert -density <span style="color:#ae81ff">600</span> filename.pdf filename.png
</span></span></code></pre></div></li>
</ul>
<p>That is it! You should now have a the png image <code>filename.png</code> in the same folder, with both a very high resolution (the <code>-density 600</code> part of the command specifies that the png should have a resolution of 600pixels/inch) and a reasonably small filesize (about half as big as the Preview.app export).</p>
<h3 id="further-tweaks---background-color">Further tweaks - background color</h3>
<p>The png exports using ImageMagick have by default transparent background. If you want your image to have a specific background color, then adding <code>-background white -flatten</code> to the command will make the background white. Like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert -density <span style="color:#ae81ff">600</span> -background white -flatten filename.pdf filename.png
</span></span></code></pre></div><h3 id="further-tweaks-">Further tweaks &hellip;</h3>
<p>ImageMagick has tons of options and capabilities. Try some internet searches about the options, or type the following command directly in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert --help
</span></span></code></pre></div><h3 id="note-using-native-macos-tools">Note: using native MacOS tools</h3>
<p>The Preview.app in MacOS can export any pdf into png format in any resolution (<code>file &gt; Export...</code>,
select png as output format). The downside is that exports somewhat big compared to the other method I described above, and it is hard to &ldquo;automate&rdquo;. Nonetheless, it may be easier for many people!</p>
<h2 id="conversion-from-pdf-to-svg">Conversion from pdf to svg</h2>
<p>As I mention above, I decided to go with raster pngs because I could use them in different context besides websites. In any case, I did test several methods to get svgs out of the TikZ pdfs, and I did find a method to get an avg with similar file sizes to the very sharp 600 pixels/inch pngs.</p>
<h3 id="tikz----pdf----svg-path">TikZ &ndash;&gt; pdf &ndash;&gt; svg path</h3>
<p>One can generate an svg directly from the pdf TikZ output by using David Barton&rsquo;s 
<a href="https://cityinthesky.co.uk/opensource/pdf2svg/" target="_blank" rel="noopener">pdf2svg</a> (
<a href="https://github.com/dawbarton/pdf2svg" target="_blank" rel="noopener">source code</a>).</p>
<p>Installing pdf2svg is a breeze with Homebrew (run command on the terminal): <!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install pdf2svg
</span></span></code></pre></div><p>Once installed, conversion is accomplished by using:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pdf2svg input_filename.pdf output_filename.svg
</span></span></code></pre></div><p>The pdf2svg does not seem to have many options (see <code>pdf2svg --help</code>).</p>
<h3 id="tikz----dvi----svg-path">TikZ &ndash;&gt; dvi &ndash;&gt; svg path</h3>
<p>This is an alternate path that I did not get to work. It uses 
<a href="https://dvisvgm.de/" target="_blank" rel="noopener">dvisvgm</a>. I do not know if it is better than the other svg option I described above. My MacOS was complaining about PostScript specials. Good places to start troubleshoting issues for anyone interested may be 
<a href="https://tobywf.com/2018/01/beautiful-svg-diagrams-with-tikz-dvisvgm/" target="_blank" rel="noopener">here</a> and 
<a href="https://shagunjhaver.com/blog/2021/08/27/tikz-knitr-html-svg-fun/" target="_blank" rel="noopener">here</a>.</p>
<h2 id="complete-example">Complete Example</h2>
<p>This is an image I used in this 
<a href="https://enriqueacosta.github.io/blog/en/posts/mauna-loa-superexponential/">post</a> in which using TikZ saved me hours of work because I could generate plots for different time periods by just changing one number in the TikZ code.</p>
<figure><img src="MaunaLoaThreeModelsTikz150.png"/>
</figure>

<p>Here are the file sizes of several export formats. I include the exported images below too.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Format</th>
<th style="text-align:center">File size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">TikZ 
<a href="MaunaLoaThreeModelsTikz150.tex">source file</a> (tiny!)</td>
<td style="text-align:center">3kb</td>
</tr>
<tr>
<td style="text-align:left">pdf vector TikZ 
<a href="MaunaLoaThreeModelsTikz150.pdf">output</a></td>
<td style="text-align:center">42kb</td>
</tr>
<tr>
<td style="text-align:left">svg output using pdf2svg</td>
<td style="text-align:center">128kb</td>
</tr>
<tr>
<td style="text-align:left">png output using ImageMagick at 600pixels/inch</td>
<td style="text-align:center">156kb</td>
</tr>
<tr>
<td style="text-align:left">png output using MacOS Preview.app at 600pixels/inch</td>
<td style="text-align:center">309kb</td>
</tr>
</tbody>
</table>
<p>In my high resolution screen, I can barely notice any differences between each version. See below.</p>
<h3 id="svg-version-using-pdf2svg">svg version using pdf2svg:</h3>
<!-- raw HTML omitted -->
<figure><img src="MaunaLoaThreeModelsTikz150.svg" width="700px"/>
</figure>

<h3 id="png-version-using-imagemagick">png version using ImageMagick:</h3>
<!-- raw HTML omitted -->
<figure><img src="MaunaLoaThreeModelsTikz150.png"/>
</figure>

<h3 id="png-version-using-previewapp">png version using Preview.app:</h3>
<!-- raw HTML omitted -->
<figure><img src="MaunaLoaThreeModelsTikz150-Preview.png"/>
</figure>

<h2 id="summary">Summary</h2>
<p>If you want to generate a relatively small size high resolution png for a TikZ image, just make sure you have ImageMagick installed, and in the terminal run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert -density <span style="color:#ae81ff">600</span> filename.pdf filename.png
</span></span></code></pre></div><p>or (if you want a white background instead of transparent one)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>convert -density <span style="color:#ae81ff">600</span> -background white -flatten filename.pdf filename.png
</span></span></code></pre></div>
  </div>

</div>

<h2>
Subscribe
</h2>
<p>
   Want to get an email when a new post is added? If so, subscribe <a href="subscribe/subscribe"> here</a>.
</p>

<footer>
  <hr style="width:50%;text-align:left;margin-left:0;margin-top:20;border: 1px solid #ac4142;">
  <div class="license">
    <p>
      &copy 2023 Enrique Acosta. </br>
      This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons CC-BY-SA 4.0 License</a>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
    </p>
  </div>
  
</footer>


    </main>

    
      
    
  </body>
</html>
